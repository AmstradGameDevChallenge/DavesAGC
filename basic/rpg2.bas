10 REM 
20 REM BASIC DUNGEONS
30 REM My RPG game for Amstrad GameDev Challenge, BASIC version
40 REM by 8bitDave <david.novella@me.com>
50 REM Created: 20190711
60 REM Last updated: 20190719



100 REM VARIABLE INIT
110 DEFINT a-z
120 pe=100:pa=30:pd=15
130 ee=80:ea=20:ed=10
140 game$="BASIC DUNGEONS"
150 a$="":m$=""

200 REM SPLASH SCREEN
210 MODE 1:ORIGIN 160,300:INK 2,4:
220 DRAW 300,0,2:DRAW 300,-100:DRAW 0,-100:DRAW 0,0
230 BORDER 3:LOCATE 13,8:PRINT game$
240 LOCATE 15,10:PRINT"#TeamBASIC"
250 LOCATE 16,11:PRINT"8bitDave"
260 LOCATE 14,20:PRINT"Key to START!"
270 a$=INKEY$
280 IF a$="" THEN GOTO 270

300 REM DRAW GAME SCREEN AND WINDOW DEFS
310 CLS
320 ORIGIN 0,97:DRAW 640,0,2
329 REM CHOOSE ACTION WINDOW
330 WINDOW #1,2,40,24,24
339 REM EVENTS WINDOW
340 WINDOW #2,2,20,20,23
349 REM ENEMY STATS WINDOW
350 WINDOW #3,21,40,20,20
359 REM PLAYER STATS WINDOW
360 WINDOW #4,21,40,22,22


400 REM FIRST GAME MESSAGES
405 m$="You face an enemy"
406 CLS #2
410 GOSUB 700
420 GOSUB 710
430 GOSUB 720

500 REM GAME LOGIC
505 m$="Choose (A)ttack/(D)efense..."
510 GOSUB 730
520 a$=INKEY$
530 IF a$="A" or a$="a" THEN ee=ee-pa:IF ee < 0 THEN GOSUB 900 ELSE GOSUB 800: GOTO 600
540 IF a$="D" or a$="d" THEN pe=pe+pd:GOTO 600
545 IF a$="R" or a$="r" THEN GOTO 100
546 IF a$="Q" or a$="q" THEN END
550 GOTO 520

600 IF RND<0.75 THEN pe=pe-ea:GOSUB 850
610 GOTO 520


700 PRINT #2,m$
705 RETURN
710 PRINT #3,"E: "ee"a:"ea"d:"ed
715 RETURN
720 PRINT #4,"P:"pe"a:"pa"d:"pd
725 RETURN
730 PRINT #1,m$
735 RETURN

800 REM Attack routine, enemy resists
810 m$="Enemy is hurt,     but alive"
820 GOSUB 700
830 GOSUB 710
840 RETURN

850 REM Enemy attacks you
855 PRINT #2, ""
860 m$="Enemy attacked you"
870 GOSUB 700
880 GOSUB 720
890 RETURN

900 REM Attack routine, enemy dies
901 REM Fix game end or continue with other enemy
902 CLS #2
910 m$="Enemy died"
920 GOSUB 700
930 cls #3
940 cls #1
950 RETURN
